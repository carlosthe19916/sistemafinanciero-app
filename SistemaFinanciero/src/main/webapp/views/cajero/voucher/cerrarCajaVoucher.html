<div ng-controller="VoucherCerrarCajaController">
<div class="row">
<div class="col-md-6" id="voucher">
    <div>
        <fieldset>
            <legend>Resumen de operaciones</legend>
        </fieldset>
    </div>
    <div class="panel panel-default">
        <table class="table">
            <tbody>
            <tr>
                <td>AGENCIA:</td>
                <td><span ng-bind="resumenCaja.agencia"/> </td>
            </tr>
            <tr>
                <td>CAJA:</td>
                <td><span ng-bind="resumenCaja.caja"/> </td>
            </tr>
            <tr>
                <td>FECHA APERTURA:</td>
                <td><span ng-bind="resumenCaja.fechaApertura | date : 'dd/MM/yyyy'"/> </td>
                <td>HORA APERTURA:</td>
                <td><span ng-bind="resumenCaja.horaApertura | date : 'HH:mm:ss'"/></td>
            </tr>
            <tr>
                <td>FECHA CIERRE:</td>
                <td><span ng-bind="resumenCaja.fechaCierre | date : 'dd/MM/yyyy'"/> </td>
                <td>HORA CIERRE:</td>
                <td><span ng-bind="resumenCaja.horaCierre | date : 'HH:mm:ss'"/> </td>
            </tr>
            <tr>
                <td>TRABAJADOR:</td>
                <td colspan="3"><span ng-bind="resumenCaja.trabajador"/></td>
            </tr>
            </tbody>
        </table>
        <div class="center-block" style="width: 98%;">
            <table class="table table-striped table-bordered table-condensed">
                <thead>
                <tr>
                    <th colspan="4">
                        DEPOSITOS(TOTAL): <span ng-bind="resumenCaja.depositosAporte + resumenCaja.depositosAhorro + resumenCaja.depositosPlazoFijo + resumenCaja.depositosCorriente"/>
                    </th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td>C. Aporte</td>
                    <td><span ng-bind="resumenCaja.depositosAporte"/></td>
                    <td>C. Ahorro</td>
                    <td><span ng-bind="resumenCaja.depositosAhorro"/></td>
                </tr>
                <tr>
                    <td>C. Plazo Fijo</td>
                    <td><span ng-bind="resumenCaja.depositosPlazoFijo"/></td>
                    <td>C. Corriente</td>
                    <td><span ng-bind="resumenCaja.depositosCorriente"/></td>
                </tr>
                </tbody>
            </table>
            <table class="table table-striped table-bordered table-condensed">
                <thead>
                <tr>
                    <th colspan="4">
                        RETIROS(TOTAL): <span ng-bind="resumenCaja.retirosAporte+resumenCaja.retirosAhorro+resumenCaja.retirosPlazoFijo+resumenCaja.retirosCorriente"/>
                    </th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td>C. Aporte</td>
                    <td><span ng-bind="resumenCaja.retirosAporte"/></td>
                    <td>C. Ahorro</td>
                    <td><span ng-bind="resumenCaja.retirosAhorro"/></td>
                </tr>
                <tr>
                    <td>C. Plazo Fijo</td>
                    <td><span ng-bind="resumenCaja.retirosPlazoFijo"/></td>
                    <td>C. Corriente</td>
                    <td><span ng-bind="resumenCaja.retirosCorriente"/></td>
                </tr>
                </tbody>
            </table>
            <table class="table table-striped table-bordered table-condensed">
                <thead>
                <tr>
                    <th colspan="4">
                        COMPRA/VENTA(TOTAL): <span ng-bind="resumenCaja.compra + resumenCaja.venta"/>
                    </th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td>Compra</td>
                    <td><span ng-bind="resumenCaja.compra"/></td>
                    <td>Venta</td>
                    <td><span ng-bind="resumenCaja.venta"/></td>
                </tr>
                </tbody>
            </table>
            <table class="table table-striped table-bordered table-condensed">
                <thead>
                <tr>
                    <th colspan="4">
                        MAYOR CUANTIA(TOTAL): <span ng-bind="resumenCaja.depositoMayorCuantia+resumenCaja.retiroMayorCuantia+resumenCaja.compraVentaMayorCuantia"/>
                    </th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td>Depositos</td>
                    <td><span ng-bind="resumenCaja.depositoMayorCuantia"/></td>
                    <td>Retiro</td>
                    <td><span ng-bind="resumenCaja.retiroMayorCuantia"/></td>
                </tr>
                <tr>
                    <td>Compra/venta:</td>
                    <td colspan="3"><span ng-bind="resumenCaja.compraVentaMayorCuantia"/></td>
                </tr>
                </tbody>
            </table>
            <table class="table table-striped table-bordered table-condensed">
                <thead>
                <tr>
                    <th colspan="4">
                        TRANS. CAJA-CAJA(TOTAL): <span ng-bind="resumenCaja.enviadoCajaCaja+resumenCaja.recibidoCajaCaja"/>
                    </th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td>Enviados:</td>
                    <td><span ng-bind="resumenCaja.enviadoCajaCaja"/></td>
                    <td>Recibidos:</td>
                    <td><span ng-bind="resumenCaja.recibidoCajaCaja"/></td>
                </tr>
                </tbody>
            </table>
            <table class="table table-striped table-bordered table-condensed">
                <thead>
                <tr>
                    <th colspan="4">
                        TRANS. CAJA-BOVEDA(TOTAL): <span ng-bind="resumenCaja.enviadoBovedaCaja+resumenCaja.enviadoBovedaCaja"/>
                    </th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td>Enviados:</td>
                    <td><span ng-bind="resumenCaja.enviadoBovedaCaja"/> </td>
                    <td>Recibidos:</td>
                    <td><span ng-bind="resumenCaja.enviadoBovedaCaja"/></td>
                </tr>
                </tbody>
            </table>
            <table class="table table-striped table-bordered table-condensed">
                <thead>
                <tr>
                    <th colspan="4">CIERRE CAJA(PENDIENTE)</th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td>Sobrantes:</td>
                    <td><span ng-bind="resumenCaja.sobrante"/></td>
                    <td>Faltantes:</td>
                    <td><span ng-bind="resumenCaja.faltante"/></td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
    <button type="button" class="btn btn-primary" ng-click="imprimirResumen()">Imprimir</button>
</div>


<div class="col-md-6">
    <tabset justified="true">
        <tab ng-repeat="voucher in voucherByMoneda" heading="{{voucher.moneda.simbolo}} {{voucher.moneda.denominacion}}" ng-cloak>
            <div>
                <fieldset>
                    <legend>Cierre caja</legend>
                </fieldset>
            </div>
            <div class="panel panel-default">
                <table class="table">
                    <tbody>
                    <tr>
                        <td>AGENCIA:</td>
                        <td><span ng-bind="voucher.caja"/></td>
                    </tr>
                    <tr>
                        <td>CAJA:</td>
                        <td><span ng-bind="voucher.caja"/></td>
                    </tr>
                    <tr>
                        <td>FECHA APERTURA:</td>
                        <td><span ng-bind="voucher.fechaApertura | date:'dd/MM/yyy'"/></td>
                        <td>HORA APERTURA:</td>
                        <td><span ng-bind="voucher.horaApertura | date:'HH:mm:ss'"/></td>
                    </tr>
                    <tr>
                        <td>FECHA CIERRE:</td>
                        <td><span ng-bind="voucher.fechaCierre | date:'dd/MM/yyyy'"/></td>
                        <td>HORA CIERRE:</td>
                        <td><span ng-bind="voucher.horaCierre | date:'HH:mm:ss'"/></td>
                    </tr>
                    <tr>
                        <td>TRABAJADOR:</td>
                        <td colspan="3"><span ng-bind="voucher.trabajador"/></td>
                    </tr>
                    </tbody>
                </table>
                <div class="center-block" style="width: 98%;">
                    <table class="table table-striped table-bordered table-condensed">
                        <thead>
                        <tr>
                            <th>Denominacion</th>
                            <th>Cantidad</th>
                            <th>Subtotal</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr ng-repeat="detalle in voucher.detalle">
                            <td><span ng-bind="detalle.valor"/></td>
                            <td><span ng-bind="detalle.cantidad"/></td>
                            <td><span ng-bind="(detalle.valor*detalle.cantidad) | currency : voucher.moneda.simbolo"/></td>
                        </tr>
                        </tbody>
                        <tfoot>
                        <tr>
                            <td colspan="3">
                                <p>
                                    <strong>Total:</strong>
                                    <span ng-bind="total(voucher.detalle)"/>
                                </p>
                            </td>
                        </tr>
                        </tfoot>
                    </table>
                </div>

                <table class="table">
                    <tbody>
                    <tr>
                        <td>Saldo Ayer:</td>
                        <td><span ng-bind="voucher.saldoAyer | currency : voucher.moneda.simbolo"/></td>
                    </tr>
                    <tr>
                        <td>Entradas:</td>
                        <td><span ng-bind="voucher.entradas | currency : voucher.moneda.simbolo"/></td>
                    </tr>
                    <tr>
                        <td>Salidas:</td>
                        <td><span ng-bind="voucher.salidas | currency : voucher.moneda.simbolo"/></td>
                    </tr>
                    <tr>
                        <td>Sobrantes de Caja:</td>
                        <td><span ng-bind="voucher.sobrante | currency : voucher.moneda.simbolo"/></td>
                    </tr>
                    <tr>
                        <td>Faltantes de Caja:</td>
                        <td><span ng-bind="voucher.faltante | currency : voucher.moneda.simbolo"/></td>
                    </tr>
                    <tr>
                        <td>Saldo por Devolver:</td>
                        <td><span ng-bind="voucher.porDevolver | currency : voucher.moneda.simbolo"/></td>
                    </tr>
                    </tbody>
                </table>
            </div>
            <button type="button" ng-click="imprimirVoucherPorMoneda($index)" class="btn btn-primary">Imprimir</button>
        </tab>
    </tabset>
</div>
</div>
</div>

<applet id="qz"
        archive="bower_components/qz-print/qz-print.jar"
        name="QZ Print Plugin" code="qz.PrintApplet.class"
        width="55"
        height="55">
    <param name="jnlp_href" value="bower_components/qz-print/qz-print_jnlp.jnlp">
    <param name="cache_option" value="plugin">
    <param name="disable_logging" value="false">
    <param name="initial_focus" value="false">
</applet>
